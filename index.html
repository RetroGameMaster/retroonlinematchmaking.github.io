<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RetroOnlineMatchmaking</title>
<style>
/* --- Base Styling --- */
body, html {
  margin:0; padding:0; font-family:"Orbitron", Arial, sans-serif;
  background:#000; color:#fff; overflow-x:hidden; cursor:none;
}

/* --- Splash Screen --- */
#splash {
  position:fixed; top:0; left:0; width:100%; height:100%;
  background:#000; display:flex; flex-direction:column; justify-content:center; align-items:center;
  z-index:2000; color:#0ff; transition: opacity 0.45s ease, transform 0.45s ease;
}
#splash.fade {
  opacity:0; transform:scale(1.02); pointer-events:none;
}
#splash h1 {
  font-size:3.5rem; animation:flicker 1s infinite; margin:0; text-align:center;
}
#splash p {
  font-size:1.2rem; margin:0.5rem 0; animation:flicker 1.5s infinite; text-align:center;
}
@keyframes flicker { 0%,100%{opacity:1} 50%{opacity:0.6} }

/* --- Progress (keeps previous visual if used) --- */
#progressContainer {
  width:70%; max-width:500px; height:12px; background:rgba(0,255,255,0.06); border:2px solid #0ff;
  border-radius:10px; margin-top:18px; overflow:hidden; display:block;
}
#progressBar { width:0%; height:100%; background:#0ff44; transition:width 0.2s linear; }

/* --- Starfield --- */
.stars { position:fixed; width:100%; height:100%; background:transparent; z-index:0; overflow:hidden; }
.star { position:absolute; width:2px; height:2px; background:#0ff; animation:twinkle 3s linear infinite; }
@keyframes twinkle { 0%{opacity:0.1}50%{opacity:1}100%{opacity:0.1} }

/* --- CRT Overlay --- */
.crt-overlay {
  position:fixed; top:0; left:0; width:100%; height:100%;
  pointer-events:none;
  background: repeating-linear-gradient(to bottom, rgba(255,255,255,0.03) 0, rgba(255,255,255,0.03) 1px, rgba(0,0,0,0.03) 2px, rgba(0,0,0,0.03) 3px);
  animation: scan 8s linear infinite; z-index:999;
}
@keyframes scan { 0%{opacity:0.1}50%{opacity:0.2}100%{opacity:0.1} }

/* --- Main Content --- */
#mainContent { display:none; padding:0; text-align:center; position:relative; z-index:1; }

header {
  padding:2rem 1rem; background:rgba(0,0,0,0.6); border-bottom:2px solid #0ff44;
}
header h1 { font-size:2.3rem; color:#0ff; text-shadow:0 0 10px #0ff66; margin:0; }
header p { font-size:1.1rem; color:#ccc; text-shadow:0 0 5px #0ff33; margin:6px 0 0 0 }

/* Buttons */
.button {
  display:inline-block; margin:0.6rem; padding:1rem 2rem; background:#0ff; color:#111;
  border-radius:10px; text-decoration:none; font-weight:bold; position:relative; overflow:hidden;
  box-shadow:0 0 10px #0ff55; transition:0.3s; cursor:pointer;
}
.button::before {
  content:""; position:absolute; top:0; left:-100%; width:100%; height:100%;
  background:repeating-linear-gradient(to bottom, rgba(255,255,255,0.05) 0, rgba(255,255,255,0.05) 2px, rgba(0,0,0,0.05) 2px, rgba(0,0,0,0.05) 4px);
  transition:left 0.3s ease-in-out;
}
.button:hover::before { left:0; }
.button:hover { background:#00b5cc; box-shadow:0 0 25px #0ff; transform:scale(1.05); }

/* Collapsible */
.collapsible {
  background: rgba(0,0,0,0.6);
  color:#0ff;
  cursor:pointer;
  padding: 1rem;
  width: 90%;
  max-width:900px;
  border: 2px solid #0ff;
  margin: 1rem auto;
  text-align:left;
  font-weight:bold;
  border-radius:10px;
  position:relative;
  transition:0.25s;
}
.collapsible::after {
  content: '\25B6';
  position:absolute; right:20px; top:50%; transform:translateY(-50%); transition:0.25s;
}
.collapsible.active::after { transform:translateY(-50%) rotate(90deg); }
.content { max-height:0; overflow:hidden; transition:max-height .35s ease; }

/* Cards */
.card {
  background: rgba(0,0,0,0.6); border:2px solid #0ff; border-radius:12px;
  margin:0.6rem auto; padding:12px; text-align:left; max-width:900px;
  box-shadow:0 0 15px #0ff33;
}
.card h3 { color:#0ff; margin:0 0 6px 0; }
.card p { color:#ccc; margin:0.25rem 0; font-size:0.95rem; }
.card a { color:#0ff; text-decoration:underline; }

/* Modal */
.modal { display:none; position:fixed; z-index:1000; left:0; top:0; width:100%; height:100%;
  background:rgba(0,0,0,0.95); justify-content:center; align-items:center; padding:1rem; }
.modal iframe { width:90%; max-width:640px; height:85vh; border:none; border-radius:12px; box-shadow:0 0 25px #0ff55; }
.close-btn { position:absolute; top:20px; right:30px; color:#0ff; font-size:2rem; font-weight:bold; cursor:pointer; text-shadow:0 0 10px #0ff; }

/* Footer */
footer { padding:1.5rem; font-size:0.9rem; background:rgba(0,0,0,0.4); color:#aaa; margin-top:2rem; }

/* Cursor */
#customCursor { position:absolute; width:32px; height:32px; pointer-events:none; z-index:9999; transform:translate(-50%,-50%); }

/* Canvas */
canvas { position:fixed; top:0; left:0; width:100%; height:100%; z-index:0; }

/* Mobile */
@media(max-width:768px){
  header h1{font-size:1.8rem;}
  .button{padding:0.8rem 1.2rem;font-size:0.95rem;}
  #customCursor{width:24px; height:24px;}
  #splash h1{font-size:2rem;}
  #splash p{font-size:1rem;}
}
</style>
</head>
<body>

<!-- Splash -->
<div id="splash" aria-hidden="false">
  <h1>RetroOnlineMatchmaking</h1>
  <p id="bootText">Initializing...</p>
  <div id="progressContainer" aria-hidden="true"><div id="progressBar"></div></div>
</div>

<!-- Starfield -->
<div class="stars" id="stars"></div>

<!-- Main Content -->
<div id="mainContent" aria-hidden="true">
  <header>
    <div style="display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap">
      <div>
        <h1>RetroOnlineMatchmaking</h1>
        <p>Play Classic Games Online Again</p>
      </div>
      <div style="display:flex;gap:8px;flex-wrap:wrap;align-items:center;">
        <a class="button" href="https://discord.com/invite/jcRqpmMZdZ" target="_blank" rel="noopener">Join Discord</a>
        <a class="button" href="https://youtube.com/@retroonlinematchmaking?si=JASKyZdqxTyAenLb" target="_blank" rel="noopener">Watch on YouTube</a>
        <a class="button" href="https://retroonlinematchmaking.flarum.cloud/" target="_blank" rel="noopener">Visit the Forum</a>
        <a class="button" id="musicButton" title="Toggle music (off by default)">ðŸ”Š Music</a>
      </div>
    </div>
  </header>

  <main style="max-width:1100px;margin:1.2rem auto;padding:0 4vw;">
    <div style="text-align:center;color:#00ffff;font-weight:800;margin-bottom:12px;">Find your Player 2 â€” choose a platform</div>

    <!-- PSP -->
    <button class="collapsible" type="button">PSP Connections</button>
    <div class="content" aria-hidden="true">
      <div class="card">
        <h3>EA Nation Hub â€” PSP</h3>
        <p>Play various EA PSP titles online.</p>
        <p><a href="https://discord.com/invite/fwrQHHxrQQ" target="_blank" rel="noopener">Discord</a> Â· <a href="https://mohh-revival.pages.dev/#setup" target="_blank" rel="noopener">Setup Guide</a></p>
      </div>
    </div>

    <!-- Vita -->
    <button class="collapsible" type="button">Vita Connections</button>
    <div class="content" aria-hidden="true">
      <div class="card">
        <h3>Vita3K â€” PS Vita</h3>
        <p>Play PS Vita games online using Vita3K + tools.</p>
        <p><a href="https://discord.gg/aBUTzGnCUS" target="_blank" rel="noopener">Discord</a> Â· <a href="https://nightly.link/Vita3K/Vita3K/actions/runs/16026361158" target="_blank" rel="noopener">Download</a></p>
      </div>
    </div>

    <!-- PS2 -->
    <button class="collapsible" type="button">PS2 Connections</button>
    <div class="content" aria-hidden="true">
      <div class="card">
        <h3>Jak X: Combat Racing â€” PS2</h3>
        <p><strong>DNS:</strong> 45.7.228.197</p>
        <p><a href="https://discord.com/invite/jak-x-online-multiplayer-752653132298977330" target="_blank" rel="noopener">Discord</a></p>
      </div>

      <div class="card">
        <h3>PSRewired â€” PS2</h3>
        <p><strong>DNS:</strong> 67.222.156.250</p>
        <p><a href="https://psrewired.com/guides/pcsx2" target="_blank" rel="noopener">Setup Guide</a></p>
      </div>

      <div class="card">
        <h3>OBSVR â€” Resident Evil Outbreak (File #2)</h3>
        <p>Infrastructure revival for Outbreak File #2.</p>
        <p><a href="https://obsrv.org/website" target="_blank" rel="noopener">Website</a> Â· <a href="https://discord.gg/88uVwczShn" target="_blank" rel="noopener">Discord</a> Â· <a href="https://youtu.be/Zv7o--OUQp8" target="_blank" rel="noopener">Guide</a></p>
      </div>
    </div>

    <!-- PS3 (NEW) -->
    <button class="collapsible" type="button">PS3 Connections</button>
    <div class="content" aria-hidden="true">
      <div class="card">
        <h3>RPCS3</h3>
        <p>PS3 emulator solution â€” community & guides.</p>
        <p><a href="https://rpcs3.net/" target="_blank" rel="noopener">Website</a> Â· <a href="https://discord.com/invite/RPCS3" target="_blank" rel="noopener">Discord</a> Â· <a href="https://www.youtube.com/watch?v=JzaocFeV4po&t=35s" target="_blank" rel="noopener">Guide</a></p>
      </div>

      <div class="card">
        <h3>PSRewired â€” PS3</h3>
        <p><strong>DNS:</strong> 67.222.156.250</p>
        <p><a href="https://psrewired.com/" target="_blank" rel="noopener">Website</a> Â· <a href="https://psrewired.com/guides/ps3" target="_blank" rel="noopener">Guide</a></p>
      </div>

      <div class="card">
        <h3>XLink Kai â€” PS3</h3>
        <p>Network tunneling for PS3 (real hardware & emulator support).</p>
        <p><a href="https://www.teamxlink.co.uk/" target="_blank" rel="noopener">Website</a> Â· <a href="https://discord.gg/team-xlink-official-521915206972997664" target="_blank" rel="noopener">Discord</a></p>
        <p><a href="https://www.teamxlink.co.uk/wiki/RPCS3_XLink_Kai_Setup" target="_blank" rel="noopener">Emulator Guide</a> Â· <a href="https://www.teamxlink.co.uk/wiki/PlayStation_3_XLink_Kai_Setup" target="_blank" rel="noopener">Hardware Guide</a></p>
      </div>

      <div class="card">
        <h3>PSONE (PSX Revivals)</h3>
        <p><strong>DNS:</strong> 185.194.142.4</p>
        <p><a href="https://www.psone.online/getting-started#" target="_blank" rel="noopener">Website/Guide</a> Â· <a href="https://discord.com/invite/uhZuGX9" target="_blank" rel="noopener">Discord</a></p>
      </div>
    </div>

    <!-- Arcade (NEW) -->
    <button class="collapsible" type="button">Arcade Connections</button>
    <div class="content" aria-hidden="true">
      <div class="card">
        <h3>Arkadyzja</h3>
        <p>Rollback-powered connection for PSX / Dreamcast / FBNeo / MAME.</p>
        <p><a href="https://github.com/Arkadyzja/ArkadyzjaClient/releases" target="_blank" rel="noopener">GitHub</a> Â· <a href="https://discord.gg/qBVN2nqAHc" target="_blank" rel="noopener">Discord</a> Â· <a href="https://youtu.be/9_pGj-tnkJM?si=Zo0DFLljnnLgSk8z" target="_blank" rel="noopener">Video Guide</a></p>
      </div>

      <div class="card">
        <h3>Fightcade</h3>
        <p>Online arcade multiplayer for classic fighters and cabinets.</p>
        <p><a href="https://www.fightcade.com/" target="_blank" rel="noopener">Website/Download</a> Â· <a href="https://youtu.be/9fpeDgxGTEQ?si=6xqPugYz_t09tbnA" target="_blank" rel="noopener">Video Guide</a> Â· <a href="https://discord.gg/fightcade-official-160417191743848448" target="_blank" rel="noopener">Discord</a></p>
      </div>

      <div class="card">
        <h3>RetroArch Netplay</h3>
        <p>Netplay across various retro systems through RetroArch.</p>
        <p><a href="https://www.retroarch.com/?page=platforms" target="_blank" rel="noopener">Website/Download</a> Â· <a href="https://youtu.be/wFE3S5TIawA?si=SzRurCi9KSoR_fbf" target="_blank" rel="noopener">Video Guide</a></p>
      </div>

      <div class="card">
        <h3>Parsec</h3>
        <p>Remote play / streaming for local multiplayer sessions.</p>
        <p><a href="https://parsec.app/" target="_blank" rel="noopener">Website</a> Â· <a href="https://youtu.be/ut3Uaj5MFsM?si=bNZ0ecJBZaSU4nym" target="_blank" rel="noopener">Video Guide</a></p>
      </div>
    </div>

    <!-- PC -->
    <button class="collapsible" type="button">PC Connections</button>
    <div class="content" aria-hidden="true">
      <div class="card">
        <h3>Parsec</h3>
        <p>Cloud-based remote play for local multiplayer retro games.</p>
        <p><a href="https://parsec.app/" target="_blank" rel="noopener">Website</a> Â· <a href="https://youtu.be/ut3Uaj5MFsM?si=bNZ0ecJBZaSU4nym" target="_blank" rel="noopener">Video Guide</a></p>
      </div>

      <div class="card">
        <h3>RetroArch Netplay</h3>
        <p>Netplay across many retro systems.</p>
        <p><a href="https://www.retroarch.com/?page=platforms" target="_blank" rel="noopener">Website</a></p>
      </div>
    </div>

    <!-- Submit -->
    <section id="submitMethodSection" style="margin:2rem auto;padding:18px;border-radius:12px;background:rgba(0,255,255,0.03);border:1px solid rgba(0,255,255,0.06);text-align:center;max-width:700px;">
      <h2 style="color:#00ffff;margin:0 0 8px 0;">Have a new connection method? Submit it here!</h2>
      <p style="color:#cfeff6;margin:0 0 12px 0;">Help expand the RetroOnlineMatchmaking network by submitting your own connection methods.</p>
      <a class="button" id="openFormBtn" href="https://docs.google.com/forms/d/e/1FAIpQLScm5TrARTAVqajDcivjW5kiGGD5nYQYjI6Wph6U3E3P5-sXLg/viewform" target="_blank" rel="noopener">Submit New Method</a>
    </section>

    <footer style="margin-top:20px;">
      <p style="color:#9fdfe8;">Â© 2025 RetroOnlineMatchmaking â€” Built by the community.</p>
    </footer>

  </main>
</div>

<!-- Custom cursor -->
<img id="customCursor" src="https://media1.giphy.com/media/v1.Y2lkPTc5MGI3NjExaWZnOXpucnlxdXB5cDNteHJ0ZjJtOGZvOXl1cGoxbms2YTV0Njc4MSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9cw/LrR1cXPmuyYUUMS1W5/giphy.gif" alt="" aria-hidden="true">

<!-- Audio (toggle) -->
<audio id="bgAudio" loop preload="auto" style="display:none">
  <source src="https://cdn.jsdelivr.net/gh/retrogamemaster/retro-assets/8bit-loop.mp3" type="audio/mpeg">
</audio>

<!-- Modal (keeps embed approach you had; if Google blocks embed, the Submit button opens form in new tab) -->
<div id="formModal" class="modal" aria-hidden="true">
  <span class="close-btn" id="closeModal" role="button" aria-label="Close form">&times;</span>
  <iframe src="https://docs.google.com/forms/d/e/1FAIpQLScm5TrARTAVqajDcivjW5kiGGD5nYQYjI6Wph6U3E3P5-sXLg/viewform?embedded=true">Loadingâ€¦</iframe>
</div>

<script>
/* ---------- Splash + progress (fixed) ---------- */
window.addEventListener('load', function onLoad() {
  // ensure this only runs once
  window.removeEventListener('load', onLoad);

  const splash = document.getElementById('splash');
  const main = document.getElementById('mainContent');
  const progressBar = document.getElementById('progressBar');
  const bootText = document.getElementById('bootText');

  let progress = 0;
  const messages = [
    "Checking Arcade Servers...",
    "Loading Multiplayer Modules...",
    "Initializing Retro Systems...",
    "Syncing Online Players...",
    "Ready to Play!"
  ];
  let idx = 0;

  const interval = setInterval(() => {
    progress += 2;
    if (progress > 100) progress = 100;
    if (progressBar) progressBar.style.width = progress + '%';

    if (progress % 20 === 0 && idx < messages.length) {
      if (bootText) bootText.textContent = messages[idx++];
    }

    if (progress >= 100) {
      clearInterval(interval);
      // fade out and remove splash
      splash.classList.add('fade');
      setTimeout(() => {
        try { splash.remove(); } catch(e){ splash.style.display='none'; }
        if (main) {
          main.style.display = 'block';
          main.setAttribute('aria-hidden', 'false');
        }
        initCursorAndCanvas();
      }, 480); // allow CSS transition
    }
  }, 70);
});

/* ---------- Collapsibles ---------- */
document.addEventListener('click', function(e){
  if(!e.target) return;
  if(e.target.classList && e.target.classList.contains('collapsible')){
    const btn = e.target;
    btn.classList.toggle('active');
    const content = btn.nextElementSibling;
    if(!content) return;
    if(content.style.maxHeight){
      content.style.maxHeight = null;
      content.setAttribute('aria-hidden','true');
    } else {
      content.style.maxHeight = content.scrollHeight + 'px';
      content.setAttribute('aria-hidden','false');
    }
  }
});

/* ---------- Modal for Google Form ---------- */
const modal = document.getElementById('formModal');
const openBtn = document.getElementById('openFormBtn');
const closeBtn = document.getElementById('closeModal');
if(openBtn){
  openBtn.addEventListener('click', function(e){
    // open new tab (href already points to form); also open modal as optional embed
    // We'll keep default behavior (opens new tab). If you want modal embedding instead, uncomment below.
    // e.preventDefault(); modal.style.display='flex';
  });
}
if(closeBtn){
  closeBtn.addEventListener('click', ()=> modal.style.display='none');
  window.addEventListener('click', (ev)=> { if(ev.target === modal) modal.style.display='none'; });
}

/* ---------- Music Toggle ---------- */
const musicBtn = document.getElementById('musicButton');
const bgAudio = document.getElementById('bgAudio');
let musicPlaying = false;
if(musicBtn){
  musicBtn.addEventListener('click', () => {
    if(!bgAudio) return;
    if(!musicPlaying){
      bgAudio.play().then(()=> {
        musicPlaying = true;
        musicBtn.classList.add('muted');
        musicBtn.textContent = 'â¸ Music';
      }).catch(err=>{
        console.warn('Playback blocked', err);
        musicBtn.textContent = 'â–¶ Play Music';
      });
    } else {
      bgAudio.pause();
      musicPlaying = false;
      musicBtn.classList.remove('muted');
      musicBtn.textContent = 'ðŸ”Š Music';
    }
  });
}

/* ---------- Cursor & Canvas Background ---------- */
function initCursorAndCanvas(){
  // custom cursor
  const cursor = document.getElementById('customCursor');
  document.addEventListener('mousemove', e => {
    if(cursor){
      const x = e.clientX + (window.scrollX || window.pageXOffset);
      const y = e.clientY + (window.scrollY || window.pageYOffset);
      cursor.style.left = x + 'px';
      cursor.style.top = y + 'px';
    }
  });

  // canvas starfield + subtle grid
  const canvas = document.createElement('canvas');
  canvas.id = 'retroCanvas';
  canvas.style.position = 'fixed';
  canvas.style.left = '0';
  canvas.style.top = '0';
  canvas.style.width = '100%';
  canvas.style.height = '100%';
  canvas.style.zIndex = '0';
  document.body.insertBefore(canvas, document.body.firstChild);
  const ctx = canvas.getContext('2d');

  function resize(){
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
  }
  resize();
  window.addEventListener('resize', resize);

  const stars = [];
  for(let i=0;i<120;i++){
    stars.push({
      x: Math.random()*canvas.width,
      y: Math.random()*canvas.height,
      s: Math.random()*2 + 0.5,
      v: Math.random()*0.6 + 0.1,
      a: Math.random()*0.8 + 0.2
    });
  }

  const particles = [];
  for(let i=0;i<40;i++){
    particles.push({
      x: Math.random()*canvas.width,
      y: Math.random()*canvas.height,
      r: Math.random()*2+0.4,
      vx: (Math.random()-0.5)*0.4,
      vy: (Math.random()-0.5)*0.4,
      a: Math.random()*0.6+0.2
    });
  }

  const shooting = [];
  function spawnS(){ shooting.push({x:Math.random()*canvas.width, y:-10, vx:Math.random()*2+1, vy:Math.random()*1.5+1, len:Math.random()*80+40, a:1}); }
  setInterval(spawnS, 2600);

  let gridOffset = 0;
  function draw(){
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // ambient gradient
    const g = ctx.createRadialGradient(canvas.width/2, canvas.height*0.12, 0, canvas.width/2, canvas.height/1.2, Math.max(canvas.width, canvas.height));
    g.addColorStop(0, 'rgba(0,30,60,0.05)');
    g.addColorStop(1, 'rgba(0,0,0,0.6)');
    ctx.fillStyle = g;
    ctx.fill
